## 技术协作（版本管理/任务管理工具）的实践总结

工作近3年，其中一段时间担任技术团队负责人，大学也在学校担任过移动互联工作室的队长，对技术团队的协作/管理问题一直关注与思考着;

思考版本管理、开发环境、任务管理工具，测试、技术文档，该如何用得更好？

希望能更好利用这些工具，实现协作更加简单高效的团队。

我也在工作中总结出自己一些经验。

### 版本管理实践
说到版本管理，首推Git，还在用SVN的你，建议换掉，如果不能一下子换掉，可以SVN/Git共用，逐步替换了；  
为什么提倡换掉，单是因为SVN是中心化版本管理，Git是分布式版本管理，SVN的中央服务器挂了，就麻烦了，但SVN也有自己的优势，建议一定要做备份，或者用NAS冗余来保障一下。  
说回Git，最简单的版本管理就是，一个master分支，一个develop分支，但在实践中，并不好；  
由于Git新建分支非常容易的特性，借鉴[《Git 最佳实践》](http://blog.jobbole.com/109466/)，每个版本新开分支，版本开发结束，合并到Maser，打标签(TAG)，删除历史版本分支，如果Master中有bug或者紧急需求，新开hotfix分支，修复完，合并到Master。
    
    #上面提到分支
    * 主分支 master
    * 开发版本的分支 提倡用 M_201712_V1.0 格式来命名
    * hotfix分支，提倡用 H_201712_V1.0 格式来命名
    * feature分支， 特性分支，做试验性开发，提倡用 F_201712_V1.0 格式来命名
    
Git新建分支比较容易，在公司项目中，不建议只有 V1.X 这样的格式简单命名，时间久了就很乱，带上年份与月份，表达性更强更清晰

先借用Git 最佳实践的图，借鉴一下，有时间自己再画一张，精简一下
![](https://github.com/lyaohe/lyaohe-cv/raw/master/img/o_git-flow-nvie.png)

### 数据库版本管理Migration
Migration，数据库版本管理工具，团队开发中，同步更新字段，强烈推荐；  
PHP 好几个框架laravel,yii2，thinkphp5 都集成Migration，低版本的php框架引入Migration也不复杂，相当好用；  
Java 听说Hibernate有自动更新数据库的功能，我们选用Flyway，也相当好用；  
如果没有Migration，缺少哪个字段，要手动补上，相当麻烦；

### 开发环境一致性
搭建开发环境是一个折腾人的事情，最好用统一用Docker或Vagrant来搭建团队开发环境，打包分发，保持一致性，也与测试环境、线上环境尽量一致，避免挖坑。  
Java开发环境，本地还是要安装Java、Maven、Tomcat的，但Mysql、Redis、Zookeeper建议都是docker化  
PHP开发环境，完全可以全部docker化，如果Windows机器开发PHP，建议用vagrant搭建Linux环境来开发，模拟与服务器环境一致

对于新人，我也建议，有空自己动手搭一次，熟悉一下开发环境，对开发非常有帮助

### 测试服务器
由于开发过程，需要发布测试版本内测，测试环境也很重要，个人比较推荐用Docker搭建，用Docker可以一台服务器搭建多个测试环境，相当方便和轻量化；

有时候开发过程中，多个分支同时测试，别避免争用测试服，建议多套测试环境还是有必要的，多套测试环境可以共用数据库，数据库变更原则是，尽量添加字段，不要删除字段即可。

### 任务管理工具实践
用过 Worktile 和 JIRA，自我感觉任务管理是有必要的，随手记起来一个任务，避免漏掉工作，任务可视化更直观；  
但也不要搞得复杂，尽可能简单易用，快速上手。
通常团队中引入任务管理工具，成员通常都忽略了，参与感不强，不积极等现象；  
所以我提倡以下几点：

1. 任务单按周来规划，一个任务不要拖太久，尽量拆解任务
2. 鼓励成员自建任务清单，自己的任务列出来，也可以提单给别人，不要只是IM沟通任务，要建任务单落实任务
3. 鼓励自觉定时清理任务单，一般情况下，一周结束前的周五清理一遍，没关闭任务单一律要评论反馈；项目急的情况下，需要每天清理一遍

### 后端API接口文档
现在主流推荐前后端分离，后端提供接口，前端调用接口，用MVVM框架构建Web应用；  
前后端分离，后端API文档必须要有，推荐用Swagger，代码和接口文档写在一起，接口逻辑有变动，接口文档也跟着修改，  
我看Java项目很多都会用Swagger，其实 PHP，Node.js也可以整合Swagger

### 内网共享文件
强烈推荐搭建一个内网共享文件，团队共享产品文档、UI设计图，非常有用，文件不用发来发去，发多了，很烦的；  
最简单用一台Windows的电脑就可以共享文件了；  
条件允许的话，推荐用Nas机器来共享文件，有磁盘阵列，可以冗余文件，其中一个硬盘坏了，文件也不会丢失。

### 技术文档Wiki
技术文档Wiki，对于知识沉淀很有用，特别新人入职也需要大致熟悉环境，看看wiki文档最好；  
但团队成员同样也不积极，参与感也不强，我依然建议多鼓励，多提倡。


以上都是小弟觉得技术团队协作中，非常有用的工具，同时也要用好他们，提升我们效率，能愉快地编写代码。

