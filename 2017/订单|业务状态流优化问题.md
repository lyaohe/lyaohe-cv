## 订单/业务状态流优化问题

通常业务系统中，状态字段控制整个功能的流程，是一个至关重要的字段，随着业务复杂度越来越高，维护状态字段就越来越困难了；有可能历史遗留问题，还搞好几个状态字段，最后搞得越来越乱了，更新状态通常漏掉一些逻辑，这种棘手问题应该如何解决？我谈谈自己解决办法：

### 1. 画状态变更流程图

通常产品设计都有产品文档或UML流程图，但往往他们都不是按照技术开发的数据库建模的状态字段来思考来画流程图，他们只会从业务需求来设计流程图，跟技术实现总会有差异；技术开发人员对数据库建模时，很有必要考虑把产品设计的流程图，转成数据库的状态字段变更的流程图，这样开发业务系统，更能有效减少状态变更带来bug；**而且要随着业务迭代，完善流程图，评估通过后，更新到Wiki文档，技术开发人员都要达成共识；**画状态变更流程图也有总结了一些心得：
	
	* 状态通常只能往下走，通常是不能回退，只能重新创建
	* 每一个状态中文名要附带代码的英文枚举值，例如:`初始化(init)`
	* 遇到设计复杂的状态，可以参考Linux文件系统的二进制权限字段

### 2. 实现更新状态注意事项
	
	* 状态字段，注释（comment）必须列举所有情况，参考数据库的设计
	* 代码上，状态变量定义枚举值，多用枚举值，少用数字
	* 更新状态的前端功能，最好有二次提醒，避免误操作
	* 更新状态的方法，对于特殊情况，要做好注释说明

--

	//todo 配图
	
